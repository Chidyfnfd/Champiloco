<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Champiloco - Restaurante de Champiñones</title>
    
    <!-- Fuentes de Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- Iconos (FontAwesome simulado para no cargar librerías pesadas, usaremos SVGs o Unicode donde sea posible, o CDN ligero) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- React y Dependencias desde CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/history@5/umd/history.development.js"></script>
    <script src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js"></script>
    <script src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js"></script>

    <style>
        /* --- VARIABLES Y RESET --- */
        :root {
            --primary: #ffbe33;
            --primary-hover: #e6a300;
            --secondary: #2596be;
            --bg-dark: #222222;
            --bg-card: #2d2d2d;
            --text-white: #ffffff;
            --text-gray: #cccccc;
            --font-title: 'Dancing Script', cursive;
            --font-body: 'Open Sans', sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-body);
            background-color: #1a1a1a; /* Fondo muy oscuro general */
            color: var(--text-white);
            line-height: 1.6;
            min-height: 100vh;
        }

        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; }
        
        /* --- UTILIDADES --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .btn {
            display: inline-block;
            background-color: var(--primary);
            color: #fff;
            padding: 10px 25px;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-family: var(--font-body);
            transition: all 0.3s ease;
            text-align: center;
        }
        .btn:hover { background-color: var(--primary-hover); transform: translateY(-2px); }
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
        .btn-outline:hover { background: var(--primary); color: #fff; }

        .title-script { font-family: var(--font-title); font-size: 2.5rem; color: #fff; margin-bottom: 1rem; }
        .text-center { text-align: center; }
        .mt-4 { margin-top: 2rem; }
        .mb-4 { margin-bottom: 2rem; }

        /* --- LAYOUT --- */
        .navbar {
            background-color: rgba(0,0,0,0.8);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            padding: 15px 0;
        }
        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo { font-family: var(--font-title); font-size: 2rem; color: #fff; }
        .nav-links { display: flex; gap: 20px; align-items: center; }
        .nav-links a { font-size: 0.9rem; font-weight: 600; text-transform: uppercase; }
        .nav-links a:hover, .nav-links a.active { color: var(--primary); }
        
        .main-content {
            padding-top: 80px; /* Espacio para el navbar fijo */
            min-height: calc(100vh - 150px);
        }

        /* --- LOGIN (Imagen 1) --- */
        .login-page {
            /* Imagen 1 simulada */
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1595126733230-67d8f5b871c8?q=80&w=1920&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed; top: 0; left: 0; width: 100%; z-index: 2000;
        }
        .login-card {
            background: rgba(30, 30, 30, 0.95);
            padding: 40px;
            border-radius: 15px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            border: 1px solid rgba(255, 190, 51, 0.2);
        }
        .login-logo-img { width: 80px; margin-bottom: 20px; }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-label { display: block; margin-bottom: 5px; font-size: 0.9rem; color: #aaa; }
        .form-input {
            width: 100%;
            padding: 12px;
            border-radius: 5px;
            border: 1px solid #444;
            background: #333;
            color: #fff;
            outline: none;
        }
        .form-input:focus { border-color: var(--primary); }

        /* --- HOME (Imagen 2) --- */
        .hero {
            /* Imagen 2 simulada */
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1563290618-97177579f16d?q=80&w=1920&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            height: 85vh;
            display: flex;
            align-items: center;
            color: #fff;
        }
        .hero-content { max-width: 600px; }
        .hero h1 { font-family: var(--font-title); font-size: 4rem; color: #fff; line-height: 1.1; margin-bottom: 20px; }
        .hero p { font-size: 1.1rem; margin-bottom: 30px; }

        /* --- MENU (Imagen 3) --- */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        .product-card {
            background-color: var(--bg-card);
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.3s;
            position: relative;
        }
        .product-card:hover { transform: translateY(-5px); }
        .product-img-container { height: 200px; overflow: hidden; background: #fff; display: flex; align-items: center; justify-content: center; }
        .product-img { width: 100%; height: 100%; object-fit: cover; }
        .product-info { padding: 20px; }
        .product-title { font-weight: 700; font-size: 1.2rem; margin-bottom: 10px; }
        .product-desc { font-size: 0.9rem; color: var(--text-gray); margin-bottom: 15px; min-height: 40px; }
        .product-price { font-size: 1.2rem; color: var(--primary); font-weight: bold; }
        .btn-add { 
            position: absolute; 
            bottom: 20px; 
            right: 20px; 
            background: var(--primary); 
            border-radius: 50%; 
            width: 40px; 
            height: 40px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            border: none;
            cursor: pointer;
            color: white;
        }

        /* --- ABOUT (Imagen 4) --- */
        .about-section { display: flex; flex-wrap: wrap; align-items: center; gap: 40px; padding: 60px 0; }
        .about-img { flex: 1; min-width: 300px; position: relative; }
        .about-img img { width: 100%; border-radius: 10px; box-shadow: -10px 10px 0 var(--primary); }
        .about-text { flex: 1; min-width: 300px; }
        .about-text h2 { font-family: var(--font-title); font-size: 3rem; margin-bottom: 20px; }

        /* --- RESERVAS (Imagen 5) --- */
        .reservation-bg {
            /* Imagen 5 simulada */
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1549488352-843258fb8271?q=80&w=1920&auto=format&fit=crop');
            background-size: cover;
            padding: 60px 0;
            min-height: 80vh;
        }
        .reservation-form { max-width: 600px; margin: 0 auto; }
        .form-row { display: flex; gap: 20px; margin-bottom: 20px; }
        .form-row .form-group { flex: 1; margin: 0; }

        /* --- USUARIO (Imagen 6) --- */
        .user-bg {
            /* Imagen 6 simulada */
            background: linear-gradient(rgba(0,0,0,0.8), rgba(0,0,0,0.8)), url('https://images.unsplash.com/photo-1605218427360-6961d37485ad?q=80&w=1920&auto=format&fit=crop');
            background-size: cover;
            min-height: 100vh;
            padding-top: 100px;
        }
        .data-table {
            width: 100%;
            background: #2c3e50;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 30px;
            border-collapse: collapse;
        }
        .data-table th { background: #1a252f; padding: 15px; color: #fff; text-align: left; }
        .data-table td { padding: 15px; border-top: 1px solid #34495e; color: #ddd; }
        .admin-menu { margin-top: 40px; }

        /* --- FOOTER --- */
        footer { background: #111; padding: 40px 0; margin-top: 50px; text-align: center; color: #777; }
        .social-icons a { color: #fff; margin: 0 10px; font-size: 1.2rem; }
        .social-icons a:hover { color: var(--primary); }

        /* --- LOADER --- */
        .loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #1a1a1a; z-index: 5000;
            display: flex; justify-content: center; align-items: center;
        }
        .spinner {
            width: 50px; height: 50px; border: 5px solid #333;
            border-top: 5px solid var(--primary); border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- DOCUMENTACION SWAGGER SIMULADA 
    
    swagger: '2.0'
    info:
      title: Champiloco API
      description: API REST para gestión de restaurante
      version: 1.0.0
    host: api.champiloco.com
    basePath: /v1
    schemes: [https]
    paths:
      /login:
        post:
          summary: Iniciar sesión
          parameters:
            - in: body
              name: credentials
              schema: { type: object, properties: { user: {type: string}, password: {type: string} } }
          responses:
            200: { description: OK, schema: { type: object, properties: { token: {type: string}, user: {type: object} } } }
      /productos:
        get:
          summary: Obtener menú
          responses:
            200: { description: Lista de productos }
      /reservas:
        post:
          summary: Crear reserva
          parameters:
            - in: body
              name: reserva
              schema: { $ref: '#/definitions/Reserva' }
    -->

    <script type="text/babel">
        const { useState, useEffect, useContext, createContext, useReducer } = React;
        const { HashRouter, Routes, Route, Link, useNavigate, useLocation } = ReactRouterDOM;

        // -----------------------------------------------------------
        // 1. DATA & MOCK API SERVICE (Simulación REST con Axios)
        // -----------------------------------------------------------

        const MOCK_DATA = {
            products: [
                { id: 1, name: "Hamburguesa ChampiLoca", desc: "Carne angus, portobellos asados, queso suizo.", price: 17000, img: "https://images.unsplash.com/photo-1594212699903-ec8a3eca50f5?q=80&w=600&auto=format&fit=crop", type: "carnico" },
                { id: 2, name: "Espagueti Funghi", desc: "Salsa cremosa de champiñones silvestres y parmesano.", price: 12000, img: "https://images.unsplash.com/photo-1612874742237-6526221588e3?q=80&w=600&auto=format&fit=crop", type: "pastas" },
                { id: 3, name: "Pizza Setas del Bosque", desc: "Masa madre, mix de 4 tipos de hongos.", price: 22000, img: "https://images.unsplash.com/photo-1513104890138-7c749659a591?q=80&w=600&auto=format&fit=crop", type: "carnico" },
                // Imagen de marcador de posición para la Crema de Champiñones
                { id: 4, name: "Crema de Champiñones", desc: "Clásica, suave y acompañada de crutones.", price: 9500, img: "https://placehold.co/600x400/36A2EB/ffffff?text=Crema+de+Champiñones", type: "pastas" }, 
            ],
            user: {
                id: 1,
                username: "admin",
                name: "Administrador",
                type: "Administrador",
                password: "135" // Simplificado para visualización
            }
        };

        // Simula interceptor o servicio de Axios
        const apiService = {
            get: (url) => {
                console.log(`[GET] ${url}`);
                return new Promise((resolve) => {
                    setTimeout(() => {
                        if (url === '/productos') resolve({ data: MOCK_DATA.products });
                        if (url === '/usuario') resolve({ data: MOCK_DATA.user });
                    }, 800); // Latencia simulada
                });
            },
            post: (url, body) => {
                console.log(`[POST] ${url}`, body);
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        if (url === '/login') {
                            if (body.email === 'admin' && body.password === '12345') {
                                resolve({ data: { token: 'abc-123', user: MOCK_DATA.user } });
                            } else {
                                reject({ response: { data: { message: "Credenciales inválidas" } } });
                            }
                        }
                        if (url === '/reservas') resolve({ data: { message: "Reserva creada con éxito" } });
                    }, 1000);
                });
            },
            put: (url, body) => {
                 console.log(`[PUT] ${url}`, body);
                 return new Promise(resolve => setTimeout(() => resolve({ data: { message: "Actualizado" } }), 800));
            }
        };

        // -----------------------------------------------------------
        // 2. CONTEXT API & REDUCER
        // -----------------------------------------------------------

        // Auth Context
        const AuthContext = createContext();

        const AuthProvider = ({ children }) => {
            const [user, setUser] = useState(null);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                // Verificar si hay sesión guardada (simulado)
                const storedUser = localStorage.getItem('champi_user');
                if (storedUser) setUser(JSON.parse(storedUser));
                setLoading(false);
            }, []);

            const login = async (email, password) => {
                try {
                    const res = await apiService.post('/login', { email, password });
                    setUser(res.data.user);
                    localStorage.setItem('champi_user', JSON.stringify(res.data.user));
                    return true;
                } catch (error) {
                    return false;
                }
            };

            const logout = () => {
                setUser(null);
                localStorage.removeItem('champi_user');
            };

            const updateUser = async (newData) => {
                await apiService.put('/usuario', newData);
                setUser({...user, ...newData});
            };

            return (
                <AuthContext.Provider value={{ user, login, logout, updateUser, loading }}>
                    {children}
                </AuthContext.Provider>
            );
        };

        // Cart Reducer & Context
        const CartContext = createContext();

        const cartReducer = (state, action) => {
            switch(action.type) {
                case 'ADD_ITEM':
                    return { ...state, items: [...state.items, action.payload] };
                case 'CLEAR':
                    return { ...state, items: [] };
                default:
                    return state;
            }
        };

        const CartProvider = ({ children }) => {
            const [state, dispatch] = useReducer(cartReducer, { items: [] });
            return (
                <CartContext.Provider value={{ cart: state, dispatch }}>
                    {children}
                </CartContext.Provider>
            );
        };

        // -----------------------------------------------------------
        // 3. COMPONENTES DE UI
        // -----------------------------------------------------------

        const Navbar = () => {
            const { user } = useContext(AuthContext);
            const { cart } = useContext(CartContext);
            const location = useLocation();
            
            // Si estamos en login no mostramos navbar
            if (location.pathname === '/login') return null;

            return (
                <nav className="navbar">
                    <div className="container nav-content">
                        <Link to="/" className="logo">ChampiLoco</Link>
                        <div className="nav-links">
                            <Link to="/home" className={location.pathname === '/home' ? 'active' : ''}>Inicio</Link>
                            <Link to="/menu" className={location.pathname === '/menu' ? 'active' : ''}>Productos</Link>
                            <Link to="/about" className={location.pathname === '/about' ? 'active' : ''}>Acerca De</Link>
                            <Link to="/reservas" className={location.pathname === '/reservas' ? 'active' : ''}>Reserva Ahora</Link>
                            
                            {/* Iconos de acción */}
                            <a href="#"><i className="fa fa-search"></i></a>
                            <a href="#">
                                <i className="fa fa-shopping-cart"></i>
                                {cart.items.length > 0 && <span style={{fontSize:'0.8em', color: 'var(--primary)', marginLeft:'5px'}}>({cart.items.length})</span>}
                            </a>
                            {user ? (
                                <Link to="/usuario"><i className="fa fa-user"></i></Link>
                            ) : (
                                <Link to="/login"><i className="fa fa-user"></i></Link>
                            )}
                        </div>
                    </div>
                </nav>
            );
        };

        const Footer = () => {
            const location = useLocation();
            if (location.pathname === '/login') return null;
            return (
                <footer>
                    <div className="container">
                        <div className="title-script" style={{fontSize: '2rem'}}>ChampiLoco</div>
                        <p className="mb-4">Tu dosis diaria de locura... ¡con champiñones!</p>
                        <div className="social-icons">
                            <a href="#"><i className="fab fa-facebook-f"></i></a>
                            <a href="#"><i className="fab fa-twitter"></i></a>
                            <a href="#"><i className="fab fa-instagram"></i></a>
                        </div>
                        <p style={{marginTop: '20px', fontSize: '0.8rem'}}>© 2025 ChampiLoco. Todos los derechos reservados.</p>
                        {/* Se eliminó el mensaje de despliegue según solicitud */}
                    </div>
                </footer>
            );
        };

        // --- PANTALLAS ---

        // 1. LOGIN
        const Login = () => {
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const { login, user } = useContext(AuthContext);
            const navigate = useNavigate();
            const [error, setError] = useState('');

            useEffect(() => {
                if (user) navigate('/home');
            }, [user, navigate]);

            const handleSubmit = async (e) => {
                e.preventDefault();
                const success = await login(email, password);
                if (success) {
                    navigate('/home');
                } else {
                    setError('Usuario o contraseña incorrectos');
                }
            };

            return (
                <div className="login-page">
                    <div className="login-card">
                        <div style={{color: 'var(--primary)', fontSize: '3rem', fontFamily: 'var(--font-title)', marginBottom: '10px'}}>
                            <i className="fas fa-mushroom"></i>
                        </div>
                        <h2 className="title-script" style={{color: 'var(--primary)'}}>ChampiLoco</h2>
                        
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label"><i className="fa fa-user"></i> Usuario</label>
                                <input 
                                    type="text" 
                                    className="form-input" 
                                    placeholder="Ingrese usuario (admin)"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                />
                            </div>
                            <div className="form-group">
                                <label className="form-label"><i className="fa fa-lock"></i> Contraseña</label>
                                <input 
                                    type="password" 
                                    className="form-input" 
                                    placeholder="Ingrese contraseña (12345)"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                />
                            </div>
                            {error && <p style={{color: 'red', marginBottom: '10px'}}>{error}</p>}
                            <button type="submit" className="btn" style={{width: '100%'}}>Iniciar Sesión</button>
                        </form>
                        <p style={{marginTop: '20px', fontSize: '0.8rem'}}>
                            <a href="#" style={{color: '#fff'}}>Crear una cuenta</a>
                        </p>
                    </div>
                </div>
            );
        };

        // 2. HOME
        const Home = () => {
            return (
                <div>
                    <section className="hero">
                        <div className="container hero-content">
                            <h1 className="title-script">ChampiLoco</h1>
                            <p>Somos un restaurante especializado en la preparación de recetas que incluyen champiñones y otros tipos de hongos sanos para el consumo.</p>
                            <Link to="/menu" className="btn">Ordena Ya</Link>
                        </div>
                    </section>
                </div>
            );
        };

        // 3. MENU / PRODUCTOS
        const Menu = () => {
            const [products, setProducts] = useState([]);
            const [filter, setFilter] = useState('Todos');
            const { dispatch } = useContext(CartContext);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                const fetchProducts = async () => {
                    const res = await apiService.get('/productos');
                    setProducts(res.data);
                    setLoading(false);
                };
                fetchProducts();
            }, []);

            const filteredProducts = filter === 'Todos' 
                ? products 
                : products.filter(p => p.type === filter.toLowerCase());

            const addToCart = (product) => {
                // Usamos alert para simular el mensaje ya que confirm/alert están prohibidos en el iFrame por la plataforma
                console.log(`Agregaste ${product.name} al carrito`);
                dispatch({ type: 'ADD_ITEM', payload: product });
            };

            if (loading) return <div className="loading-overlay"><div className="spinner"></div></div>;

            return (
                <div className="container">
                    <div className="text-center mb-4">
                        <h2 className="title-script" style={{color: 'var(--primary)'}}>Descuentos <span style={{background: 'var(--secondary)', fontSize:'0.5em', padding:'2px 5px', borderRadius:'3px', color:'white'}}>+</span></h2>
                        {/* Banner de descuento hardcodeado como en la imagen */}
                        <div style={{background: '#222', borderRadius: '10px', padding: '20px', display: 'flex', alignItems: 'center', gap: '20px', maxWidth: '800px', margin: '0 auto', border: '1px solid #333'}}>
                            <img src={products[1]?.img} alt="Espagueti Funghi" style={{width: '120px', height: '120px', borderRadius: '50%', border: '3px solid var(--primary)', objectFit: 'cover'}} />
                            <div style={{textAlign: 'left', flex: 1}}>
                                <h3 className="title-script" style={{margin: 0}}>Espagueti de champiñones</h3>
                                <div style={{fontSize: '2rem', fontWeight: 'bold'}}>12% <span style={{fontSize: '1rem', fontWeight: 'normal'}}>Off</span></div>
                                <button className="btn" style={{padding: '5px 15px'}} onClick={() => addToCart(products[1])}><i className="fa fa-shopping-cart"></i></button>
                            </div>
                        </div>
                    </div>

                    <div className="text-center mt-4">
                        <h2 className="title-script">PRODUCTOS <span style={{background: 'var(--secondary)', fontSize:'0.5em', padding:'2px 5px', borderRadius:'3px', color:'white'}}>+</span></h2>
                        <div style={{display: 'flex', justifyContent: 'center', gap: '10px', margin: '20px 0'}}>
                            <button className="btn" style={{background: filter === 'Todos' ? 'var(--primary)' : 'transparent', color: filter === 'Todos' ? '#333' : 'var(--primary)'}} onClick={() => setFilter('Todos')}>Todos</button>
                            <button className="btn btn-outline" style={{border: 'none'}} onClick={() => setFilter('Carnico')}>Carnico</button>
                            <button className="btn btn-outline" style={{border: 'none'}} onClick={() => setFilter('Pastas')}>Pastas</button>
                        </div>
                    </div>

                    <div className="menu-grid">
                        {filteredProducts.map(p => (
                            <div className="product-card" key={p.id}>
                                <div className="product-img-container">
                                    <img 
                                        src={p.img} 
                                        alt={p.name} 
                                        className="product-img" 
                                        onError={(e) => {
                                            // Corregido: Usa onError en camelCase y una función
                                            e.target.onerror = null;
                                            e.target.src='https://placehold.co/600x400/808080/ffffff?text=Imagen+no+disponible';
                                        }}
                                    />
                                </div>
                                <div className="product-info">
                                    <h3 className="product-title">{p.name}</h3>
                                    <p className="product-desc">{p.desc}</p>
                                    <div className="product-price">${p.price}</div>
                                    <button className="btn-add" onClick={() => addToCart(p)}>
                                        <i className="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // 4. ACERCA DE
        const About = () => {
            return (
                <div className="container about-section">
                    <div className="about-img">
                        {/* Imagen de marcador de posición para la sección 'Acerca de' */}
                        <img 
                            src="https://placehold.co/800x500/FFCE56/333333?text=Nuestra+Historia" 
                            alt="Chef preparando champiñones" 
                            onError={(e) => {
                                // Corregido: Usa onError en camelCase y una función
                                e.target.onerror = null;
                                e.target.src='https://placehold.co/800x500/808080/ffffff?text=Imagen+no+disponible';
                            }}
                        />
                    </div>
                    <div className="about-text">
                        <h2 className="title-script">Nosotros somos ChampiLoco</h2>
                        <p>¿Estás listo para una explosión de sabor? En Champiloco, llevamos los champiñones a otro nivel. Nuestra pasión por estas setas nos ha llevado a crear un menú lleno de platillos únicos y deliciosos.</p>
                        <br/>
                        <p>Desde pasta cremosa hasta hamburguesas jugosas, ¡cada bocado es una experiencia inolvidable! Somos más que un restaurante, somos un lugar donde los amantes de los champiñones pueden disfrutar de una comida divertida y relajada.</p>
                        
                        <div style={{marginTop: '30px', display: 'flex', justifyContent: 'space-between'}}>
                            <div>
                                <h4 className="title-script">Contáctanos</h4>
                                <p><i className="fab fa-whatsapp"></i> +57 3000000000</p>
                                <p><i className="fa fa-envelope"></i> correo@gmail.com</p>
                            </div>
                            <div>
                                <h4 className="title-script">Horario</h4>
                                <p>Todos los días</p>
                                <p>10:00 AM - 10:00 PM</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // 5. RESERVAS
        const Reservations = () => {
            const [formData, setFormData] = useState({ sucursal: '', personas: '', fecha: '', hora: '' });
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                // Usamos console.log para simular mensaje de éxito en lugar de alert()
                if (!formData.sucursal || !formData.personas || !formData.fecha || !formData.hora) {
                    console.error('Por favor, complete todos los campos de la reserva.');
                    return;
                }
                await apiService.post('/reservas', formData);
                console.log("¡Reserva solicitada con éxito!");
            };

            return (
                <div className="reservation-bg">
                    <div className="container">
                        <div className="reservation-form">
                            <h2 className="title-script" style={{color: 'var(--primary)', marginBottom: '30px'}}>Reserva una orden</h2>
                            <form onSubmit={handleSubmit}>
                                <div className="form-group mb-4">
                                    <label className="form-label" style={{color: 'var(--primary)'}}>Selecciona la Sucursal:</label>
                                    <select className="form-input" style={{background: '#fff', color: '#333'}} 
                                        value={formData.sucursal} onChange={e => setFormData({...formData, sucursal: e.target.value})} required>
                                        <option value="">-- Selecciona una sucursal --</option>
                                        <option value="norte">Sede Norte</option>
                                        <option value="centro">Sede Centro</option>
                                    </select>
                                </div>
                                <div className="form-group mb-4">
                                    <label className="form-label" style={{color: 'var(--primary)'}}>Cantidad de Personas:</label>
                                    <input type="number" className="form-input" style={{background: '#fff', color: '#333'}} 
                                        value={formData.personas} onChange={e => setFormData({...formData, personas: e.target.value})} min="1" required />
                                </div>
                                <div className="form-group mb-4">
                                    <label className="form-label" style={{color: 'var(--primary)'}}>Fecha:</label>
                                    <input type="date" className="form-input" style={{background: '#fff', color: '#333'}} 
                                        value={formData.fecha} onChange={e => setFormData({...formData, fecha: e.target.value})} required />
                                </div>
                                <div className="form-group mb-4">
                                    <label className="form-label" style={{color: 'var(--primary)'}}>Hora:</label>
                                    <input type="time" className="form-input" style={{background: '#fff', color: '#333'}} 
                                        value={formData.hora} onChange={e => setFormData({...formData, hora: e.target.value})} required />
                                </div>
                                <button type="submit" className="btn" style={{background: '#fff', color: '#333'}}>Reservar</button>
                            </form>
                        </div>
                    </div>
                </div>
            );
        };

        // 6. USUARIO
        const UserProfile = () => {
            const { user, logout, updateUser } = useContext(AuthContext);
            const navigate = useNavigate();

            if (!user) {
                // Redirección simple si no hay usuario
                useEffect(() => { navigate('/login'); }, []);
                return null;
            }

            return (
                <div className="user-bg">
                    <div className="container">
                        <h2 className="title-script" style={{fontSize: '3rem', marginBottom: '20px'}}>Sus datos de cuenta</h2>
                        
                        <table className="data-table">
                            <thead>
                                <tr>
                                    <th>ID de Usuario</th>
                                    <th>Nombre</th>
                                    <th>Contraseña</th>
                                    <th>Nombre de Usuario</th>
                                    <th>Tipo de Usuario</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{user.id}</td>
                                    <td>{user.name}</td>
                                    <td>***</td>
                                    <td>{user.username}</td>
                                    <td>{user.type}</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <button className="btn" style={{marginBottom: '40px'}}>Editar datos de cuenta</button>

                        <div className="admin-menu">
                            <h2 className="title-script" style={{fontSize: '2.5rem', marginBottom: '20px'}}>Menú de administración</h2>
                            <table className="data-table">
                                <thead>
                                    <tr>
                                        <th>Opción</th>
                                        <th>Descripción</th>
                                        <th>Acción</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Agregar Empleado</td>
                                        <td>Registrar un nuevo empleado en el sistema</td>
                                        <td style={{color: 'var(--primary)'}}>Agregar</td>
                                    </tr>
                                    <tr>
                                        <td>Editar Empleado</td>
                                        <td>Modificar la información de un empleado existente</td>
                                        <td style={{color: 'var(--primary)'}}>Editar</td>
                                    </tr>
                                    <tr>
                                        <td>Eliminar Empleado</td>
                                        <td>Eliminar un empleado del sistema</td>
                                        <td style={{color: 'var(--primary)'}}>Eliminar</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div className="text-center">
                            <button className="btn" onClick={() => { logout(); navigate('/login'); }}>Cerrar Sesion</button>
                        </div>
                    </div>
                </div>
            );
        };

        // --- APP PRINCIPAL ---
        const App = () => {
            const { loading } = useContext(AuthContext);
            
            if (loading) return <div className="loading-overlay"><div className="spinner"></div></div>;

            return (
                <HashRouter>
                    <CartProvider>
                        <Navbar />
                        <div className="main-content">
                            <Routes>
                                <Route path="/login" element={<Login />} />
                                <Route path="/" element={<Home />} />
                                <Route path="/home" element={<Home />} />
                                <Route path="/menu" element={<Menu />} />
                                <Route path="/about" element={<About />} />
                                <Route path="/reservas" element={<Reservations />} />
                                <Route path="/usuario" element={<UserProfile />} />
                            </Routes>
                        </div>
                        <Footer />
                    </CartProvider>
                </HashRouter>
            );
        };

        // Renderizado
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <AuthProvider>
                <App />
            </AuthProvider>
        );
    </script>
</body>
</html>
